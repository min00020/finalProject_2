<div xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:th="http://www.thymeleaf.org"
	layout:decorate="@{/layout/member/mainTemplate.html}"
	layout:fragment="content">


	<div class="d-flex">

		<aside th:replace="@{/layout/member/pointAsideMain.html}"></aside>

		<section class="main">

			<div class="pointCharegingMain">
				<div style="width: 80%; margin: 0 auto; margin-top: 30px; margin-bottom: 30px;">
					<div class="chargePointSelect">
						<div class="input-container">
						<div class="bankNameImage">
						<img th:src="|/commonResource/bankImage/${bankName}.png|" th:alt="${bankName}"
										style="height: 40px; margin-right : 10px; margin-top:-5px"><span style = "font-size : larger; font-weight : bold; color : #808080 ">[[${bankName}]]</span></div>
							</div>
							
							<div class="accountAndNext" style="margin-top:-20px;">
							<input type="text" class="amountInput" id="nameInput" name ="nameInput" placeholder="이름 입력" style="margin-top : 30px;"/><hr style="margin-top: 0;">
							<input type="Number" class="amountInput" id="accountInput" name="accountInput" placeholder="-없이 계좌번호 입력" />
						
						<hr style="margin-top: 0;">
						<button class="next" style ="width : 100%; border : none; height : 50px;" id="nextBtn">다음</button>
					</div>
				</div>
				<div class="accountInfo" style="margin-top:130px;color : #808080">
				<p style="font-weight : bold;">간편결제로 연결할 수 없는 계좌</p><hr>
				<p>
					·본인 명의가 아닌 계좌<br>
					·가상계좌/적금/펀드/정기예금 등의 계좌<br>
					·휴대폰 번호 등으로 만든 평생 계좌번호<br>
					·계좌에 문제가 있는 경우 (예: 지급정지 또는 해약된 경우)</p><hr><br><br><br>
					
					<p style="font-weight : bold;">내 명의 계좌인데 연결이 안될 때</p><hr>
				<p>
					
					아래에 해당하는 경우 실명 정보를 수정하신 후 연결해 주세요.

					·이름을 개명한 경우
					·주민등록번호를 변경한 경우
					·실명 정보를 오랫동안 업데이트 하지 않은 경우
					·실명 정보 수정하기</p><hr>
				</div>

			</div>
			</div>

		</section>
	</div>

</div>

<script th:inline="javascript">	

const bankCode = [[${bankCode}]];
const accessToken = [[${nhAccessToken}]];
const Iscd = [[${Iscd}]];

const date = new Date();
let today = getFormatDate(date);
const time = date.getTime()
console.log(date);

	$('#nextBtn').on('click', function(e) {
		let name = $('#nameInput').val();
		let account = $('#accountInput').val();

		let obj = {};
		obj["Header"] = {
			ApiNm : "InquireDepositorOtherBank"	,
			Tsymd : today,
			Trtm :"113300",
			Iscd : Iscd,
			FintechApsno : "001",
			ApiSvcCd : "DrawingTransferA",
			IsTuno : [[${session.member.memberNo}]]+time,
			AccessToken : accessToken,	
		},
		obj["Bncd"] = bankCode;
		obj["Acno"] = account;
		
		$.ajax('https://developers.nonghyup.com/InquireDepositorOtherBank.nh', {
			type:'post',
			contentType: 'application/json',
			data : JSON.stringify(obj)
		})
		.done(res => {
			console.log(res);
		})
		.fail(err => {
			console.log(err);
		})
	})
	
	
	function getFormatDate(date){
    	var year = date.getFullYear();              //yyyy
    	var month = (1 + date.getMonth());          //M
    	month = month >= 10 ? month : '0' + month;  //month 두자리로 저장
    	var day = date.getDate();                   //d
    	day = day >= 10 ? day : '0' + day;          //day 두자리로 저장
    	
    	return  year + '' + month + '' + day;       //'-' 추가하여 yyyy-mm-dd 형태 생성 가능
	}
	
</script>

<style>
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
  -webkit-appearance: none;
}
.input-container {
    display: flex; /* Flexbox 레이아웃을 활성화 */
    align-items: center; /* 수직 방향으로 중앙 정렬 */
    margin-top: 10px; /* 상단 여백 추가 */
    
}
.AA {
	margin-top: 30px;
	justify-content: end;
}

.summary-container {
	border-radius: 8px;
	padding: 20px;
	font-size: larger;
	margin-top: 30px;
	width: 38%;
}

.summary-item {
	display: flex;
	justify-content: space-between;
	margin-bottom: 10px;
}

.summary-total {
	font-weight: bold;
	color: red;
	margin-bottom: 20px;
}

.Abutton {
	background-color: #3e6ce3;
	color: white;
	border: none;
	padding: 10px 20px;
	border-radius: 5px;
	cursor: pointer;
	margin: 5px;
}

.termsParent {
	margin-top: 30px;
	width: 60%;
	border: 1px solid;
	padding: 15px;
	background-color: #F2F2F2
}

.terms-container {
	width: 300px;
	border: 1px solid #000;
	padding: 10px;
	overflow-y: scroll;
	height: 150px;
	width: 100%;
	background-color: #fff
}

.agree-chkbox {
	margin-top: 10px;
	text-align: right;
	margin-right: 0px;
}

.addAcount {
	text-align: center;
	color: #3e6ce3;
	font-weight: bold;
}

.account {
	border: 1px solid #BDBDBD;
	height: 80px;
	border-radius: 5px;
	text-align: left;
	margin-bottom: 10px;
}

.accountSelect {
	text-align: left;
}

.pointHeader {
	background-color: #3e6ce3;
	color: white;
	padding: 20px;
	text-align: left;
	border-radius: 5px;
	width: 1000px;
	height: 80px;
	margin-left: 50px;
	position: relative;
	/* 상대 위치 설정 */
}

.pointHeader p {
	font-size: 27px;
	font-weight: bold;
	position: absolute;
	/* 절대 위치 설정 */
	top: 7%;
	/* 상단으로부터 30% 위치 */
	left: 20px;
	/* 텍스트 정렬을 위한 왼쪽 여백 */
}

.pointHeader span {
	position: absolute;
	top: 59%;
	font-size: 16px;
}

.pointCharegingMain {
	border: 1px solid #BDBDBD;
	margin-left: 50px;
	margin-top: 20px;
	width: 1000px;
	height: 1000px;
}

.chargePointSelect {
	text-align: center;
	font-family: 'Noto Sans KR', sans-serif;
	margin-top:px;
}

.chargePointSelect p {
	margin-bottom: 10px;
}

.points button {
	background-color: #f1f1f1;
	border: 1px solid #ccc;
	border-radius: 4px;
	padding: 7px 20px;
	margin: 0 5px;
	font-size: 16px;
	cursor: pointer;
	width: 100px;
}

.points button:hover {
	background-color: #e9e9e9;
}

.pointInput {
	width: 300px;
	font-size: 16px;
}

.input-container {
	font-family: 'Noto Sans KR', sans-serif;
	margin-bottom: 12px;
}

.input-container label {
	display: block;
	margin-bottom: 10px;
}

.amountInput {
	width: 100%;
	padding: 8px;
	border: none;
	border-radius: 4px;
	margin-bottom: -20px;
	margin-top: 0px;
	font-size: 28px;
	/* 입력 텍스트의 글자 크기를 설정 */
}

.amountInput::placeholder {
	font-size: 28px;
	/* 원하는 텍스트 크기로 조정 */
}

.amountInput:focus {
	outline: none;
	border-color: #3e6ce3;
	box-shadow: 0 0 5px rgba(62, 108, 227, 0.5);
}
</style>
