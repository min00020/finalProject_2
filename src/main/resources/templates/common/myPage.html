<div xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:th="http://www.thymeleaf.org"
	layout:decorate="@{/layout/member/mainTemplate.html}"
	layout:fragment="content">
	<div class="d-flex">
		<section class="d-flex" style="float: left;">
			<aside style="width: 100%; background-color: #aebfec;">
				<div class="flex-shrink-0">
					<!-- ν”„λ΅ν•„-->
					<div class="card justify-content-center align-items-center"
						style="text-align: center; width: 270px; margin: 15px;">
						<!-- ν”„μ‚¬ -->
						<div class="box-1">
							<th:block th:if="${memberInfo.profileImage} == null">
								<img class="profile-1" src="commonResource/default_profile.jpg"
									style="width: 100%; height: 100%;" alt="profile">
							</th:block>
							<th:block th:unless="${memberInfo.profileImage} == null">
								<img class="profile-1 mx-auto d-block"
									style="width: 100%; height: 100%;"
									th:src="|upload/profile/${memberInfo.profileImage}|" alt="...">
							</th:block>
						</div>
						<!-- grade image -->
						<div class="card-body">
							<h6 class="card-text" style="font-weight: bold;"
								th:text="${memberInfo.nickname}">\</h6>
							<h6 class="card-text" th:text="${memberInfo.email}">\</h6>
							<img
								th:src="|commonResource/gradeimage/${memberInfo.gradeName}.png|"
								logo="" style="width: 30px;"> <span class="card-text"
								th:text="${memberInfo.gradeName}">\</span>
							<h6 class="card-text" th:text="|${#numbers.formatInteger(memberInfo.accumActivityPoint, 0, 'COMMA')} P|">\</h6>

						</div>
					</div>

					<!-- summary -->

					<div class="card container"
						style="width: 270px; height: 400px; margin-top: 30px; margin-left: 15px;">
						<h5
							style="padding-top: 30px; padding-bottom: 30px; font-weight: bold; text-align: center;">SUMMARY</h5>
						<!-- μ •μ‚°μ”μ²­ div -->
						<div class="container2"
							style="background-color: #aebfec; border-radius: 20px; padding: 10px 10px 10px 5px;">
							<div class="row"
								style="width: auto; height: auto; overflow: visible;">
								<div class="tae-box1 col-1" style="width: 50px;">
									<img class="img1" src="commonResource/icon/point.png"
										style="width: 50px; height: auto;">
								</div>
								<div class="tae-box2 col-2" style="width: 140px;">
									<h6 style="font-weight: bold;">POINT</h6>
									<h6 class="card-text" style="color:#3e6ce3;font-weight:bold;"
										th:text="|${#numbers.formatInteger(memberInfo.acoPoint, 0, 'COMMA')} P|"></h6>
								</div>
								<div class="col-1" style="width: 55px;">
									<!-- λ¨λ‹¬λ²„νΌ -->
									<button type="button" class="btn btn-modal"
										data-bs-toggle="modal" data-bs-target="#point"
										style="text-decoration: none;color: #979da9;">

										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
											viewBox="0 0 24 24" fill="none" stroke="currentColor"
											stroke-width="2" stroke-linecap="round"
											stroke-linejoin="round" class="feather feather-chevron-right">
										<polyline points="9 18 15 12 9 6"></polyline></svg>
									</button>
									<!-- λ¨λ‹¬μ‹μ‘ -->
									<div class="modal fade" id="point" tabindex="-1" role="dialog"
										aria-labelledby="pointModalLabel" aria-hidden="true">
										<div class="modal-dialog modal-xl" role="document">
											<div class="modal-content">
												<div class="modal-header">

													<h3 class="modal-title" id="pointModalLabel"
														style="font-weight: bold;">
														<img src="commonResource/icon/point.png"
															style="width: 70px; height: 70px;">ν¬μΈνΈλ±…ν¬
													</h3>

												</div>
												<div class="modal-body">
													<!-- ν¬μΈνΈλ±…ν¬λ¨λ‹¬μμ—­ -->
													<div style="height:430px;">
														<div class="d-flex">
															<div class="point-image" style="width:350px;">
																<img src="/commonResource/taefolder/pointacc.png" style="width:350px;">
																<h4 style="font-weight:bold;padding-left:60px;">λ„μ  μ• μ½”ν¬μΈνΈ ν„ν™©</h4>
																<h3 style="font-weight:bold;padding-left:120px;color:#2e54b7;" th:text="|${#numbers.formatInteger(memberInfo.acoTotal, 0, 'COMMA')} P|"></h3>
															</div>
															<form id="updatePoint">
																<div class="point-acc" style="hegiht:700px;">
																	<div class="point-acc-1" style="width:750px;hegiht:450px;margin-top:40px;">
																		<h4 style="font-weight:bold;">μ• μ½”ν¬μΈνΈ μ •μ‚°</h4>
																		<br>
																		<p style="margin-bottom:-8px;color:#3e6ce3;margin-top:-30px;">* μµμ† 5,000P λ¶€ν„° μ •μ‚°κ°€λ¥ν•λ©° ν¬μΈνΈμƒµμ—μ„ μ¶©μ „ν• ν¬μΈνΈλ” μ •μ‚° λ¶κ°€</p>
																		<br>
																		<div class="input-group mb-3" style="width:600px;height:50px;">
																			<input type="text" class="form-control" name="resPoint" th:placeholder="|μ •μ‚°κ°€λ¥ν¬μΈνΈ ${#numbers.formatInteger(memberInfo.availableAccumPoint, 0, 'COMMA')} P|" aria-label="Recipient's username" aria-describedby="button-addon2" style="text-align:right;font-weight:bold;border:#ced9ea;background-color: beige;">
																			<!-- κ³„μΆκ°€ μ—†λ” κ²½μ° κ³„μΆ λ“±λ΅ κ²½λ΅λ΅ μ΄λ™ -->
																			<button class="btn btn-outline-secondary" type="button" onclick="accumPoint()" style="font-weight:bold;background-color:#80a9e8;color:#fff;border:none;">μ •μ‚°μ”μ²­</button>
																			<!-- κ³„μΆκ°€ μλ” κ²½μ° κ³„μΆ λ©λ΅ ν‘μ‹ -->
																			
																		</div>
																	</div>
																	<div class="point-acc-1" style="width:750px;hegiht:450px;">
																		<h4 style="font-weight:bold;">ν™λ™μ μ ν¬μΈνΈ μ „ν™</h4>
																		<br>
																		<p style="margin-bottom:-8px;color:#3e6ce3;margin-top:-30px;">* 5,000μ  μ΄μƒλ¶€ν„° 1,000μ  λ‹¨μ„λ΅ μ „ν™κ°€λ¥</p>
																		<br>
																		<div class="input-group mb-3" style="width:600px;height:50px;">
																			<input type="text" class="form-control" name="acpoint" th:placeholder="|κ°€μ© ν™λ™μ μ ${#numbers.formatInteger(memberInfo.availableActivityPoint, 0, 'COMMA')} μ |"  aria-label="Recipient's username" aria-describedby="button-addon2" style="text-align:right;font-weight:bold;border:#ced9ea;background-color: beige;">
																			<button class="btn btn-outline-secondary" type="button" id="changepoint" onclick="changePoint()" style="font-weight:bold;background-color:#80a9e8;color:#fff;border:none;">ν™μ „μ”μ²­</button>
																		</div>
																	</div>
																</div>
															</form>
														</div>
													</div>
														<div id="activityList">
															<div>
																<h4 style="padding-left:30px;font-weight:bold;">ν¬μΈνΈ μ •μ‚° λ° ν™μ „ λ‚΄μ—­</h4><hr>
																	<ul class="scroll type3" style="overflow-y: scroll; height: 300px; overflow-x: hidden;">
																		<li class="activity1" th:each="pol:${pointList}">
																		<span style="font-weight:bold;font-size:large;" th:text="${pol.historyType}"></span>
																		<span class="increase-point" th:if="${pol.accType} == '0'" th:text="|+ ${pol.incDecPoint}P |"></span>
																		<span class="decrease-point" th:unless="${pol.accType} == '0'" th:text="| ${pol.incDecPoint}P |"></span>
																		<br>
																		<span class="tae_date" th:text="${#dates.format(pol.historyDate, 'yy-MM-dd')}">[[${pol.historyDate}]]</span>
																		<hr>
																		</li>
																	</ul>
																
															</div>
														</div>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn btn-secondary"
														data-bs-dismiss="modal">Close</button>
												</div>
											</div>
										</div>
									</div>
									<!-- λ¨λ‹¬ λ -->
								</div>
							</div>
						</div>
						<!-- ν™λ™μ μ -->
						<div class="container2"
							style="background-color: #aebfec; border-radius: 20px; padding: 10px 10px 10px 5px;">
							<div class="row"
								style="width: auto; height: auto; overflow: visible;">
								<div class="tae-box1 col-1" style="width: 50px;">
									<img class="img2" src="commonResource/icon/activity.png"
										style="width: 50px; height: auto;">
								</div>
								<div class="tae-box2 col-2" style="width: 140px;">
									<h6 style="font-weight: bold;">λ‚΄ ν™λ™ κ΄€λ¦¬</h6>
									<h6 class="card-text">ν™λ™/λ“±κΈ‰ κ΄€λ¦¬</h6>
								</div>
								<div class="col-1" style="width: 55px;">
									<!-- λ¨λ‹¬λ²„νΌ -->
									<button type="button" class="btn btn-modal"
										data-bs-toggle="modal" data-bs-target="#activity"
										style="text-decoration: none; color: #979da9;">
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
											viewBox="0 0 24 24" fill="none" stroke="currentColor"
											stroke-width="2" stroke-linecap="round"
											stroke-linejoin="round" class="feather feather-chevron-right">
										<polyline points="9 18 15 12 9 6"></polyline></svg>
									</button>
									<!-- λ¨λ‹¬μ‹μ‘ -->
									<div class="modal fade" id="activity" tabindex="-1"
										role="dialog" aria-labelledby="activityModalLabel"
										aria-hidden="true">
										<div class="modal-dialog modal-xl" role="document">
											<div class="modal-content">
												<div class="modal-header">
													<h3 class="modal-title" id="activityModalLabel"
														style="font-weight: bold;">
														<img src="commonResource/icon/activity.png"
															style="width: 70px; height: 70px;">λ‚΄ν™λ™κ΄€λ¦¬
													</h3>
												</div>
												<div class="modal-body">
													<div class="d-flex" style="hegiht:700px;">
														<div class="activity-image" style="width:350px;hegiht:700px;padding-left:30px;">
															<img th:src="|commonResource/gradeimage/${memberInfo.gradeName}.png|" style="width:300px;padding:left:50px;">
															<h4 style="text-align:center;font-weight:bold;">λ‚΄ λ“±κΈ‰</h4>
														</div>
														<div class="grade" style="hegiht:700px;padding-left:80px;">
															<div class="point-acc-1" style="width:750px;hegiht:450px;margin-top:40px;">
																<div class="grade">
																	<div class="gradeinfo" style="float:left;">
																		<img class="gradeimage" src="commonResource/gradeimage/λ£¨ν‚¤.png">
																	</div>
																	<div class="gradecontent" style="display:inline-block;padding-left:20px;" >
																		<h5 class="grade-h5" style="font-weight:bold;padding-top:9px;">LV1. λ£¨ν‚¤</h5>
																		<br>
																		<p class="grade-p" style="margin-top:-30px;">κ°€μ…ν• λ¨λ“  νμ›</p>
																	</div>
																</div>
																<div class="grade">
																	<div class="gradeinfo">
																		<img class="gradeimage" src="commonResource/gradeimage/λΈλ΅ μ¦.png">
																	</div>
																	<div class="gradecontent">
																		<h5 class="grade-h5">LV2. λΈλ΅ μ¦</h5>
																		<br>
																		<p class="grade-p">μ‘μ„±λ μ§μκΈ€ λ° λ‹µλ³€μ΄ 20κ° μ΄μƒμ΄λ©΄μ„ λ„μ  ν™λ™μ μ 30,000μ  μ΄μƒμΈ νμ›</p>
																	</div>
																</div>
																<div class="grade">
																	<div class="gradeinfo">
																		<img class="gradeimage" src="commonResource/gradeimage/μ‹¤λ²„.png">
																	</div>
																	<div class="gradecontent">
																		<h5 class="grade-h5">LV3. μ‹¤λ²„</h5>
																		<br>
																		<p class="grade-p">μ‘μ„±λ μ§μκΈ€ λ° λ‹µλ³€μ΄ 100κ° μ΄μƒμ΄λ©΄μ„ λ„μ  ν™λ™μ μ 200,000μ  μ΄μƒμΈ νμ›</p>
																	</div>																
																</div>
																<div class="grade">
																	<div class="gradeinfo">
																		<img class="gradeimage" src="commonResource/gradeimage/κ³¨λ“.png">
																	</div>
																	<div class="gradecontent">
																		<h5 class="grade-h5">LV4. κ³¨λ“</h5>
																		<br>
																		<p class="grade-p">μ‘μ„±λ μ§μκΈ€ λ° λ‹µλ³€μ΄ 500κ° μ΄μƒμ΄λ©΄μ„ λ„μ  ν™λ™μ μ 500,000μ  μ΄μƒμΈ νμ›</p>
																	</div>	
																</div>
																<div class="grade">
																	<div class="gradeinfo">
																		<img class="gradeimage"  src="commonResource/gradeimage/λ‹¤μ΄μ•„λ¬λ“.png">
																	</div>
																	<div class="gradecontent">
																		<h5 class="grade-h5">LV5. λ‹¤μ΄μ•„λ¬λ“</h5>
																		<br>
																		<p class="grade-p">μ‘μ„±λ μ§μκΈ€ λ° λ‹µλ³€μ΄ 1000κ° μ΄μƒμ΄λ©΄μ„ λ„μ  ν™λ™μ μ 1,000,000μ  μ΄μƒμΈ νμ›</p>
																	</div>	
																</div>
															</div>
															
														</div>
													</div>
													<div id="activityList">
															<div>
																<h4 style="padding-left:30px;font-weight:bold;">λ‚΄ ν™λ™ λ‚΄μ—­</h4><hr>
																	<ul class="scroll type3" style="overflow-y: scroll; height: 300px; overflow-x: hidden;">
																		<li class="activity1" th:each="acp:${activityList}">
																		<span style="font-weight:bold;font-size:large;" th:if="${acp.incDecActivityPoint} >= '0'" th:text="|${acp.historyType}λ΅ μΈν•μ—¬ ν™λ™μ μκ°€ μ¦κ°λμ—μµλ‹λ‹¤.|"></span>
																		<span style="font-weight:bold;font-size:large;" th:unless="${acp.incDecActivityPoint} >= '0'" th:text="|${acp.historyType}λ΅ μΈν•μ—¬ ν™λ™μ μκ°€ μ°¨κ°λμ—μµλ‹λ‹¤.  |"></span>
																		<span class="increase-point" th:if="${acp.incDecActivityPoint} >= '0'" th:text="|+ ${acp.incDecActivityPoint}μ  |"></span>
																		<span class="decrease-point" th:unless="${acp.incDecActivityPoint} >= '0'" th:text="| ${acp.incDecActivityPoint}μ  |"></span>
																		<br>
																		<span class="tae_date" th:text="${#dates.format(acp.activityPointDate, 'yy-MM-dd')}">[[${acp.activityPointDate}]]</span>
																		<hr>
																		</li>
																		
																	</ul>
																
															</div>
													</div>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn btn-secondary"
														data-bs-dismiss="modal">Close</button>
												</div>
											</div>
										</div>
									</div>
									<!-- λ¨λ‹¬ λ -->
								</div>
							</div>
						</div>

						<!-- νμ›μ •λ³΄μμ • -->
						<div class="container2"
							style="background-color: #aebfec; border-radius: 20px; padding: 10px 10px 10px 5px;">
							<div class="row"
								style="width: auto; height: auto; overflow: visible;">
								<div class="tae-box1 col-1" style="width: 50px;">
									<img class="profile" src="commonResource/icon/modifyinfo.png"
										style="width: 50px; height: auto;">
								</div>
								<div class="tae-box2 col-2" style="width: 140px;">
									<h6 style="font-weight: bold;">νμ›μ •λ³΄μμ •</h6>
									<h6 class="card-text">μ •λ³΄,λΉ„λ°€λ²νΈ</h6>
								</div>
								<div class="col-1" style="width: 55px;">
									<!-- λ¨λ‹¬λ²„νΌ -->
									<button type="button" class="btn btn-modal"
										data-bs-toggle="modal" data-bs-target="#point"
										style="text-decoration: none;color: #979da9;">
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
											viewBox="0 0 24 24" fill="none" stroke="currentColor"
											stroke-width="2" stroke-linecap="round"
											stroke-linejoin="round" class="feather feather-chevron-right">
										<polyline points="9 18 15 12 9 6"></polyline></svg>
									</button>
									<!-- λ¨λ‹¬μ‹μ‘ -->
									<div class="modal fade" id="modify" tabindex="-1" role="dialog"
										aria-labelledby="modifyModalLabel" aria-hidden="true">
										<div class="modal-dialog modal-xl" role="document">
											<div class="modal-content">
												<div class="modal-header">
													<h3 class="modal-title" id="modifyModalLabel"
														style="font-weight: bold;">
														<img src="/commonResource/icon/modifyinfo.png"
															style="width: 70px; height: 70px;">νμ›μ •λ³΄μμ •
													</h3>
												</div>
												<!-- νμ›μ •λ³΄μμ •λ¨λ‹¬μμ—­ μ „λ―Όκµκ°€ μ—°λ™ν•κΈ°λ΅ν•¨ -->
												<div class="modal-body">
													
												</div>
												<div class="modal-footer">
													<button type="button" class="btn btn-secondary"
														data-bs-dismiss="modal">Close</button>
													<button type="button" class="btn btn-primary">Save
														changes</button>
												</div>
											</div>
										</div>
									</div>
									<!-- λ¨λ‹¬ λ -->
								</div>
							</div>
						</div>
						<!-- μ„μ—κΉμ§€ νμ›μ •λ³΄ μμ • λ -->
					</div>
				</div>
			</aside>
		</section>
		<!-- λ©”μΈλ°”λ””μμ—­ -->
		<!-- mypage1 -->
		<div class="container" style="background-color: #aebfec;">
			<div class="container">
				<div class="card" id="myTabContent" style="height: 850px;">
					<ul class="nav nav-tabs" id="myTab" role="tablist">
						<li class="nav-item" role="presentation">
							<button class="nav-link active" id="home-tab"
								data-bs-toggle="tab" data-bs-target="#home-tab-pane"
								type="button" role="tab" aria-controls="home-tab-pane"
								aria-selected="true" style="width: 380px;">λ‚΄κ°€ μ°Έμ—¬ν• ν”„λ΅μ νΈ</button>
						</li>
						<li class="nav-item" role="presentation">
							<button class="nav-link" id="profile-tab" data-bs-toggle="tab"
								data-bs-target="#profile-tab-pane" type="button" role="tab"
								aria-controls="profile-tab-pane" aria-selected="false"
								style="width: 380px;" onclick="location.href='/myPage2'">λ‚΄
								μ§λ‹µν†µκ³„</button>
						</li>
					</ul>
					<div class="card d-flex">
						<div class="card">
							<div class="card-body" id="card-1">
								<h5 class="card-title">πƒβ€β™€οΈμ°Έμ—¬ν”„λ΅μ νΈ λ©λ΅</h5>
								<h6 class="card-subtitle mb-2 text-body-secondary">Card
									subtitle</h6>
								<p class="card-text">Some quick example text to build on the
									card title and make up the bulk of the card's content.</p>
								<a href="#" class="card-link">Card link</a> <a href="#"
									class="card-link">Another link</a>
							</div>
						</div>
					</div>
					<div>

						<div class="card d-flex"
							style="width: 437px; height: 277px; float: left; margin-top: 30px; margin-left: 20px; overflow: visible;">
							<div class="card-body" id="card-1"
								style="width: 437px; height: 277px;">
								<h5 style="text-align: center; font-weight: bold;">λ‚΄ κ΄€μ‹¬μ£Όμ </h5>
								<ul class="tab-ul">
									<li th:text="${memberInfo.topicHashtag}"></li>
								</ul>
							</div>
						</div>
						<div class="card d-flex"
							style="width: 437px; height: 277px; float: left; margin-top: 30px; margin-left: 20px; overflow: visible;">
							<div class="card-body" id="card-1"
								style="width: 437px; height: 277px;">
								<h5 style="margin-bottom: -8px; font-weight: bold;">
									π‰ μ΄λ¨ν‹°μ½ κµ¬λ§¤λ‚΄μ—­
									<button type="button" class="btn btn-modal"
										onclick="goEmoShop()" data-bs-toggle="modal"
										data-bs-target="#bookmark"
										style="text-decoration: none; color: #979da9;">
										λ”λ³΄κΈ°
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
											viewBox="0 0 24 24" fill="none" stroke="currentColor"
											stroke-width="2" stroke-linecap="round"
											stroke-linejoin="round" class="feather feather-chevron-right">
										<polyline points="9 18 15 12 9 6"></polyline></svg>
									</button>
									<hr>
								</h5>
								<ul class="tab-ul">
									<li th:each="emo:${emoInfo}">[[ ${emo.emoName} ]] <span
										th:text="|κµ¬λ§¤λ‚ μ§ ${#dates.format(emo.emoBuydate, 'yyyy-MM-dd')}|"
										style="padding-left: 133px; float: right;">
											[[${emo.emoBuydate}]] </span>

										<hr>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
	const memberno = [[${session.member.memberNo}]]
	function goEmoShop(){
		location.href = '/emoMain';
	}
	function accumPoint(){
		location.href = '/accountConnect';
	}
	
	$('button').on('click', changePoint);
	
		function pointUpdateAjax(event){
			if (!validation()) return;
			let pointDta = changePoint();		
			console.log('pointDta', pointDta);
			$.ajax('updateMemberPoint'{
				type:"POST",
				data : JSON.stringify(pointDta),
				contentType : 'application/json',				
			}).done(result =>{
				this.$showSuccessAlert('','μ •μƒμ μΌλ΅ ν™μ „ λμ—μµλ‹λ‹¤. ');
				console.log(result);
			}).fail(err => console.log(err));
		}
			
		function validation(){
			let resPoint = $('[name="resPoint"]');
			if(resPoint.val() < 5000){
			showWarningAlert("5,000μ  μ΄μƒλ¶€ν„° ν™μ „ κ°€λ¥ν•©λ‹λ‹¤");
				return false;
			}
			return true;
		}	
			
	function changePoint(){
		let formAry = $('form[name="updateMemberPoint"]').serializeArray();
		console.log(formAry);
		
		let formObj = {};
		$(formAry).each(idx, tag)=>{
			console.log(tag);
			formObj[tag.name] = tag.value;
		});
		return formObj;
	}
	
</script>
