<div xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:th="http://www.thymeleaf.org"
	layout:decorate="@{layout/member/mainTemplate.html}"
	layout:fragment="content">
	<div class="d-flex">
		<section class="d-flex" id="tae-section">
			<aside class="tae-aside">
				<div class="flex-shrink-0">
					<!-- í”„ë¡œí•„-->
					<div class="card justify-content-center align-items-center" id="tae-card">
						<!-- í”„ì‚¬ -->
						<div class="box-1">
							<th:block th:if="${memberInfo.profileImage} == null">
								<img class="tae-profile-1" th:src="commonResource/default_profile.jpg"
									 alt="profile">
							</th:block>
							<th:block th:unless="${memberInfo.profileImage} == null">
								<img class="tae-profile-1 mx-auto d-block"
									th:src="|upload/profile/${memberInfo.profileImage}|" alt="...">
							</th:block>
						</div>
						<!-- grade image -->
						<div class="card-body">
							<h6 class="tae-card-text"
								th:text="${memberInfo.nickname}">\</h6>
							<h6 class="card-text" th:text="${memberInfo.email}">\</h6>
							<img class="tae-gradeImage"
								th:src="|commonResource/gradeimage/${memberInfo.gradeName}.png|"
								logo=""> <span class="card-text"
								th:text="${memberInfo.gradeName}">\</span>
							<h6 class="card-text" th:text="|${#numbers.formatInteger(memberInfo.accumActivityPoint, 0, 'COMMA')} P|">\</h6>

						</div>
					</div>

					<!-- summary -->

					<div class="card container" id="tae-container3">
						<h5 id="tae-sum-h5">SUMMARY</h5>
						<!-- ì •ì‚°ìš”ì²­ div -->
						<div class="tae-container4">
							<div class="row" id="tae-row">
								<div class="tae-box1 col-1">
									<img class="img1" src="commonResource/icon/point.png">
								</div>
								<div class="tae-box2 col-2" id="tae-box2">
									<h6 class="tae-h6">POINT</h6>
									<h6 id="pointMypage" class="card-text"
										th:text="|${#numbers.formatInteger(memberInfo.acoTotal, 0, 'COMMA')} P|"></h6>
								</div>
								<div class="col-1" id="tae-col-1">
									<!-- ëª¨ë‹¬ë²„íŠ¼ -->
									<button type="button" class="btn btn-modal"  id="tae-modal-btn"
										data-bs-toggle="modal" data-bs-target="#point">
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
											viewBox="0 0 24 24" fill="none" stroke="currentColor"
											stroke-width="2" stroke-linecap="round"
											stroke-linejoin="round" class="feather feather-chevron-right">
										<polyline points="9 18 15 12 9 6"></polyline></svg>
									</button>
									<!-- ëª¨ë‹¬ì‹œì‘ -->
									<div class="modal fade" id="point" tabindex="-1" role="dialog"
										aria-labelledby="pointModalLabel" aria-hidden="true">
										<div class="modal-dialog modal-xl" role="document">
											<div class="modal-content">
												<div class="modal-header" style="height:90px;">

													<h3 class="modal-title" id="pointModalLabel"
														style="font-weight: bold;">
														<img src="commonResource/icon/point.png"
															style="width: 70px; height: 70px;">í¬ì¸íŠ¸ë±…í¬
													</h3>

												</div>
												<div class="modal-body">
													<!-- í¬ì¸íŠ¸ë±…í¬ëª¨ë‹¬ì˜ì—­ -->
													<div style="height:350px;">
														<div class="d-flex">
															<div class="point-image" style="width:350px;">
																<img src="/commonResource/taefolder/pointacc.png" style="width:350px;">
																<h4 class="tae-h4-1">ëˆ„ì  ì• ì½”í¬ì¸íŠ¸ í˜„í™©</h4>
																<h3 id="totalPointMypage" th:text="|${#numbers.formatInteger(memberInfo.acoTotal, 0, 'COMMA')} P|"></h3>
															</div>
																<div class="point-acc" style="margin-top:-20px;">
																	<div class="point-acc-1">
																		<h4 class="tae-h4-2">ì• ì½”í¬ì¸íŠ¸ ì •ì‚°</h4>
																		<br>
																		<p class="tae-p-1">* ìµœì†Œ 5,000P ë¶€í„° ì •ì‚°ê°€ëŠ¥í•˜ë©° í¬ì¸íŠ¸ìƒµì—ì„œ ì¶©ì „í•œ í¬ì¸íŠ¸ëŠ” ì •ì‚° ë¶ˆê°€</p>
																		<br>
																		<div class="input-group mb-3" style="height:50px;">
																			<input type="text" id="accumPointMypage" class="tae-form-control" name="accPoint" th:placeholder="|ì›í•˜ëŠ” í™˜ì „ í¬ì¸íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”|" aria-label="Recipient's username" aria-describedby="button-addon2">
																			<button class="btn btn-outline-secondary" id="accountApprove" type="button">ì •ì‚°ìš”ì²­</button>
																		</div>
																	</div>
																	<div class="point-acc-1">
																		<h4 class="tae-h4-2">í™œë™ì ìˆ˜ í¬ì¸íŠ¸ ì „í™˜</h4>
																		<br>
																		<p class="tae-p-1">* 5,000ì  ì´ìƒë¶€í„° 1,000ì  ë‹¨ìœ„ë¡œ ì „í™˜ê°€ëŠ¥</p>
																		<br>
																		<div class="input-group mb-3" style="height:50px;">
																			<input type="text" class="tae-form-control" id="activityMypage" name="resPoint" th:placeholder="|ê°€ìš© í™œë™ì ìˆ˜ ${#numbers.formatInteger(memberInfo.availableActivityPoint, 0, 'COMMA')} ì |"  aria-label="Recipient's username" aria-describedby="button-addon2">
																			<button class="btn btn-outline-secondary" type="button" id="changepoint">í™˜ì „ìš”ì²­</button>
																		</div>
																	</div>
																</div>
														</div>
													</div>
														<div id="activityList">
															<div>
																<h4 style="padding-left:30px;font-weight:bold;">í¬ì¸íŠ¸ ì •ì‚° ë° í™˜ì „ ë‚´ì—­</h4>
																<hr>
																	<ul class="scroll type3" id="accumList">
																		<li class="activity1" th:each="pol:${pointList}">
																		<span style="font-weight:bold;font-size:large;" th:text="${pol.historyType}"></span>
																		<span class="increase-point" th:if="${pol.accType} == '0'" th:text="|+ ${#numbers.formatInteger(pol.incDecPoint, 0, 'COMMA')}P |"></span>
																		<span class="decrease-point" th:unless="${pol.accType} == '0'" th:text="| ${#numbers.formatInteger(pol.incDecPoint, 0, 'COMMA')}P |"></span>
																		<br>
																		<span class="tae_date" th:text="${#dates.format(pol.historyDate, 'yy-MM-dd')}">[[${pol.historyDate}]]</span>
																		<hr>
																		</li>
																	</ul>
																
															</div>
														</div>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn btn-secondary"
														data-bs-dismiss="modal">ë‹«ê¸°</button>
												</div>
											</div>
										</div>
									</div>
									<!-- ëª¨ë‹¬ ë -->
									
								</div>
							</div>
						</div>
						<!-- í™œë™ì ìˆ˜ -->
						<div class="tae-container4">
							<div class="row" id="tae-row">
								<div class="tae-box1 col-1">
									<img class="img1" src="commonResource/icon/activity.png">
								</div>
								<div class="tae-box2 col-2" id="tae-box2">
									<h6 class="tae-h6">ë‚´ í™œë™ ê´€ë¦¬</h6>
									<h6 class="card-text">í™œë™/ë“±ê¸‰ ê´€ë¦¬</h6>
								</div>
								<div class="col-1" id="tae-col-1">
									<!-- ëª¨ë‹¬ë²„íŠ¼ -->
									<button type="button" class="btn btn-modal" id="tae-modal-btn"
										data-bs-toggle="modal" data-bs-target="#activity">
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
											viewBox="0 0 24 24" fill="none" stroke="currentColor"
											stroke-width="2" stroke-linecap="round"
											stroke-linejoin="round" class="feather feather-chevron-right">
										<polyline points="9 18 15 12 9 6"></polyline></svg>
									</button>
									<!-- ëª¨ë‹¬ì‹œì‘ -->
									<div class="modal fade" id="activity" tabindex="-1"
										role="dialog" aria-labelledby="activityModalLabel"
										aria-hidden="true">
										<div class="modal-dialog modal-xl" role="document">
											<div class="modal-content">
												<div class="modal-header" style="height:90px;">
													<h3 class="modal-title" id="activityModalLabel"
														style="font-weight: bold;">
														<img src="commonResource/icon/activity.png"
															style="width: 70px; height: 70px;">ë‚´í™œë™ê´€ë¦¬
													</h3>
												</div>
												<div class="modal-body">
													<div class="d-flex" style="hegiht:600px;">
														<div class="activity-image" style="width:350px;hegiht:700px;padding-left:30px;margin-top:-20px;">
															<img th:src="|commonResource/gradeimage/${memberInfo.gradeName}.png|" style="width:250px;margin-top:20px;padding:left:50px;">
															<h4 style="text-align:center;font-weight:bold;">ë‚´ ë“±ê¸‰</h4>
														</div>
														<div class="grade" style="hegiht:700px;padding-left:80px;margin-top: -20px;">
															<div class="point-acc-1" style="width:750px;hegiht:450px;margin-top:40px;">
																<div class="grade">
																	<div class="gradeinfo" style="float:left;">
																		<img class="gradeimage" src="commonResource/gradeimage/ë£¨í‚¤.png">
																	</div>
																	<div class="gradecontent" style="display:inline-block;padding-left:20px;" >
																		<h5 class="grade-h5" style="font-weight:bold;padding-top:9px;">LV1. ë£¨í‚¤</h5>
																		<br>
																		<p class="grade-p" style="margin-top:-30px;">ê°€ì…í•œ ëª¨ë“  íšŒì›</p>
																	</div>
																</div>
																<div class="grade">
																	<div class="gradeinfo">
																		<img class="gradeimage" src="commonResource/gradeimage/ë¸Œë¡ ì¦ˆ.png">
																	</div>
																	<div class="gradecontent">
																		<h5 class="grade-h5">LV2. ë¸Œë¡ ì¦ˆ</h5>
																		<br>
																		<p class="grade-p">ì‘ì„±ëœ ì§ˆì˜ê¸€ ë° ë‹µë³€ì´ 20ê°œ ì´ìƒì´ë©´ì„œ ëˆ„ì  í™œë™ì ìˆ˜ 30,000ì  ì´ìƒì¸ íšŒì›</p>
																	</div>
																</div>
																<div class="grade">
																	<div class="gradeinfo">
																		<img class="gradeimage" src="commonResource/gradeimage/ì‹¤ë²„.png">
																	</div>
																	<div class="gradecontent">
																		<h5 class="grade-h5">LV3. ì‹¤ë²„</h5>
																		<br>
																		<p class="grade-p">ì‘ì„±ëœ ì§ˆì˜ê¸€ ë° ë‹µë³€ì´ 100ê°œ ì´ìƒì´ë©´ì„œ ëˆ„ì  í™œë™ì ìˆ˜ 200,000ì  ì´ìƒì¸ íšŒì›</p>
																	</div>																
																</div>
																<div class="grade">
																	<div class="gradeinfo">
																		<img class="gradeimage" src="commonResource/gradeimage/ê³¨ë“œ.png">
																	</div>
																	<div class="gradecontent">
																		<h5 class="grade-h5">LV4. ê³¨ë“œ</h5>
																		<br>
																		<p class="grade-p">ì‘ì„±ëœ ì§ˆì˜ê¸€ ë° ë‹µë³€ì´ 500ê°œ ì´ìƒì´ë©´ì„œ ëˆ„ì  í™œë™ì ìˆ˜ 500,000ì  ì´ìƒì¸ íšŒì›</p>
																	</div>	
																</div>
																<div class="grade">
																	<div class="gradeinfo">
																		<img class="gradeimage"  src="commonResource/gradeimage/ë‹¤ì´ì•„ëª¬ë“œ.png">
																	</div>
																	<div class="gradecontent">
																		<h5 class="grade-h5">LV5. ë‹¤ì´ì•„ëª¬ë“œ</h5>
																		<br>
																		<p class="grade-p">ì‘ì„±ëœ ì§ˆì˜ê¸€ ë° ë‹µë³€ì´ 1000ê°œ ì´ìƒì´ë©´ì„œ ëˆ„ì  í™œë™ì ìˆ˜ 1,000,000ì  ì´ìƒì¸ íšŒì›</p>
																	</div>	
																</div>
															</div>
															
														</div>
													</div>
													<div id="activityList">
															<div>
																<h4 class="tae-h4-3">ë‚´ í™œë™ ë‚´ì—­</h4><hr>
																	<ul id="accumList2" class="scroll type3" style="overflow-y: scroll; height: 300px; overflow-x: hidden;">
																		<li class="activity2" th:each="acp:${activityList}">
																		<span style="font-weight:bold;font-size:large;" th:if="${acp.incDecActivityPoint} >= 0" th:text="|${acp.historyType}ë¡œ ì¸í•˜ì—¬ í™œë™ì ìˆ˜ê°€ ì¦ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.|"></span>
																		<span style="font-weight:bold;font-size:large;" th:unless="${acp.incDecActivityPoint} >= 0" th:text="|${acp.historyType}ë¡œ ì¸í•˜ì—¬ í™œë™ì ìˆ˜ê°€ ì°¨ê°ë˜ì—ˆìŠµë‹ˆë‹¤.|"></span>
																		<span class="increase-point" th:if="${acp.incDecActivityPoint} >= '0'" th:text="|+ ${#numbers.formatInteger(acp.incDecActivityPoint, 0, 'COMMA')}ì  |"></span>
																		<span class="decrease-point" th:unless="${acp.incDecActivityPoint} >= '0'" th:text="| ${#numbers.formatInteger(acp.incDecActivityPoint, 0, 'COMMA')}ì |"></span>
																		<br>
																		<span class="tae_date" th:text="${#dates.format(acp.activityPointDate, 'yy-MM-dd')}">[[${acp.activityPointDate}]]</span>
																		<hr>
																		</li>
																		
																	</ul>
																
															</div>
													</div>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn btn-secondary"
														data-bs-dismiss="modal">ë‹«ê¸°</button>
												</div>
											</div>
										</div>
									</div>
									<!-- ëª¨ë‹¬ ë -->
									<!-- ì •ì‚° ê³„ì¢Œ Modal -->
									
										<div th:if="${#lists.size(accountList)} == 0">
											<div class="modal fade" id="accountList" tabindex="-1" aria-labelledby="accountApproveLabel" aria-hidden="true">
											  <div class="modal-dialog">
											    <div class="modal-content">
											      <div class="modal-header">
											        <h3 class="modal-title fs-5" id="accountApproveLabel">ì •ì‚° ë°›ì„ ê³„ì¢Œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</h3>
											      </div>
											      <div class="modal-body">
											       	<h5 style="font-weight:bold;color:#54545d;">ì€í–‰ì„ íƒ</h5>
												      	<div class="bankcard">
												       		<p style="text-align:center;color:#979da9;">"í˜„ì¬ ë“±ë¡ëœ ê³„ì¢Œê°€ ì—†ìŠµë‹ˆë‹¤."</p>
													        <button type="button" class="btn btn-primary" style="padding-left: 150px;text-align:center;background-color:#fff;color:#979da9;border:0px;" 
													        th:onclick="goRegAccount()">ê³„ì¢Œ ë“±ë¡í•˜ëŸ¬ê°€ê¸° ã€‰</button>
												       	</div>
											      </div>
											      <div class="modal-footer">
											        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
											      </div>
											    </div>
											  </div>
											</div>
										</div>
										<div th:unless="${#lists.size(accountList)} == 0">
											<div class="modal fade" id="accountList" tabindex="-1" aria-labelledby="accountApproveLabel" aria-hidden="true">
											  <div class="modal-dialog">
											    <div class="modal-content">
											      <div class="modal-header">
											        <h3 class="modal-title fs-5" id="accountApproveLabel">ì •ì‚° ë°›ì„ ê³„ì¢Œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</h3>
											      </div>
											      <div class="modal-body">
											       	<h5 style="font-weight:bold;color:#54545d;">ì€í–‰ì„ íƒ</h5>
														<div class="bank" th:id="${acc.accountNo}" th:each="acc:${accountList}"  >
												       		<button type="button" style="border:0;background-color:transparent;"
												       		 th:onclick="choiceAccount([[${acc.accountNo}]])">
												       			<img class="tae-bank-1" th:src="|commonResource/bankImage/${acc.bankName}.png|">
													       		<p th:text="${acc.bankName}" style="float:left;padding-left:12px;">/</p>
															</button>											       		
												       </div>												       
											      </div>
											      <div class="modal-footer">
											        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
											        <button type="button" th:onclick="sendSettlementRequest()" class="btn btn-primary">ì •ì‚°ìš”ì²­</button>
											      </div>
											    </div>
											  </div>
											</div>
										</div>
								</div>
							</div>
						</div>

						<!-- íšŒì›ì •ë³´ìˆ˜ì • -->
						<div class="tae-container4">
							<div class="row" id="tae-row">
								<div class="tae-box1 col-1">
									<img class="img1" src="commonResource/icon/modifyinfo.png">
								</div>
								<div class="tae-box2 col-2" id="tae-box2">
									<h6 class="tae-h6">íšŒì›ì •ë³´ìˆ˜ì •</h6>
									<h6 class="card-text">ì •ë³´,ë¹„ë°€ë²ˆí˜¸</h6>
								</div>
								<div class="col-1" id="tae-col-1">
									<!-- ëª¨ë‹¬ë²„íŠ¼ -->
									<button type="button" class="btn btn-modal"  id="tae-modal-btn"
										data-bs-toggle="modal" data-bs-target="#modify">
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
											viewBox="0 0 24 24" fill="none" stroke="currentColor"
											stroke-width="2" stroke-linecap="round"
											stroke-linejoin="round" class="feather feather-chevron-right">
										<polyline points="9 18 15 12 9 6"></polyline></svg>
									</button>
									<!-- ëª¨ë‹¬ì‹œì‘ -->
									<div class="modal fade" id="modify" tabindex="-1" role="dialog"
										aria-labelledby="modifyModalLabel" aria-hidden="true">
										<div class="modal-dialog" role="document">
											<div class="modal-content">
												<div class="modal-header">
													<h3 class="modal-title" id="modifyModalLabel"
														style="font-weight: bold;">
														<img src="/commonResource/icon/modifyinfo.png"
															style="width: 70px; height: 70px;">íšŒì›ì •ë³´ìˆ˜ì •
													</h3>
												</div>
												<!--/* íšŒì›ì •ë³´ìˆ˜ì •ëª¨ë‹¬ì˜ì—­ ì „ë¯¼êµê°€ ì—°ë™í•˜ê¸°ë¡œí•¨ -> ì™„ë£Œ */-->
												<div class="modal-body">
													<!--/*  */-->
													<div class="d-flex justify-content-center">
														<button type="button" id="modAcc0" class="btn" style="width:49%; border:1px solid #979da9; background-color:#3e6ce3; color:white;" onclick="changeModifyAccountView('0')">íšŒì›ì •ë³´ ìˆ˜ì •</button>
														<button type="button" id="modAcc1" class="btn" style="width:49%; border:1px solid #979da9;" onclick="changeModifyAccountView('1')">ë¹„ë°€ë²ˆí˜¸ ìˆ˜ì •</button>
													</div>
													<!--/* íšŒì›ì •ë³´ìˆ˜ì • */-->
													<div id="modAccDiv0">
														<div class="my-3">
															<label for="email" class="px-3">ì´ë©”ì¼</label>
															<div class="px-3 mt-2">
																<input id="email" type="text"
																	class="px-3 py-2 w-75 min-rounded"
																	placeholder="ask@help.com" name="email" th:value="${memberInfo.email}">
																<button class="min-small-rounded min-default-color"
																	style="margin-left: 0.3rem;" type="button"
																	onclick="checkDuplicateEmail()">ì¤‘ë³µì²´í¬</button>
															</div>
														</div>

														<div class="my-3">
															<label for="name" class="px-3">ì‹¤ëª…</label>
															<div class="px-3 mt-2">
																<input id="name" type="text"
																	class="px-3 py-2 w-75 min-rounded" placeholder="í™ê¸¸ë™"
																	name="name" th:value="${memberInfo.name}">
																<button class="min-small-rounded min-default-color"
																	style="margin-left: 0.3rem; visibility: hidden;">ì¸ì¦í•˜ê¸°</button>
															</div>
														</div>

														<div class="my-3">
															<label for="nickname" class="px-3">ë‹‰ë„¤ì„</label>
															<div class="px-3 mt-2">
																<input id="nickname" type="text"
																	class="px-3 py-2 w-75 min-rounded"
																	placeholder="ì•ŒíŒŒë²³,í•œê¸€,ìˆ«ì 20ì ì´í•˜ì…ë ¥" name="nickname" th:value="${memberInfo.nickname}">
																<button class="min-small-rounded min-default-color"
																	style="margin-left: 0.3rem;" onclick="checkDuplicateNickname()">ì¤‘ë³µì²´í¬</button>
															</div>
														</div>

														<div class="my-3">
															<p class="px-3 mt-2" style="margin-bottom: 0;">í”„ë¡œí•„
																ì‚¬ì§„ ë“±ë¡</p>
															<div class="px-3 mt-2">
																<input class="upload-name px-3 py-2 w-75 min-rounded"
																	value="" placeholder="ì²¨ë¶€íŒŒì¼" id="customFileInput"
																	disabled> <label for="profileImg"
																	class="min-small-rounded min-default-color" id="clickFile">íŒŒì¼ì¶”ê°€</label>
																<input id="profileImg" type="file"
																	class="px-3 py-2 w-25 min-rounded" name="profileImg"
																	style="display: none;">
															</div>
														</div>

														<div class="my-3">
															<label for="tags" class="px-3">ê´€ì‹¬
																ì£¼ì œ</label>
															<div class="mt-1 px-3">
																<input name='tags' class=min-tagify placeholder='íƒœê·¸ì¶”ê°€' data-blacklist='.NET,PHP' id="tags">
																<button class="min-small-rounded min-default-color"
																	style="margin-left: 0.3rem; visibility: hidden;">ì¸ì¦í•˜ê¸°</button>
															</div>
															<p
																style="color: hsla(220, 30%, 1%, .4); margin-right: 16.5rem;"
																class="px-3 mt-2">ìµœëŒ€ 5ê°œê¹Œì§€ ë“±ë¡ê°€ëŠ¥</p>
														</div>
													</div>
													<!--/* ë¹„ë°€ë²ˆí˜¸ ìˆ˜ì • */-->
													<div id="modAccDiv1" style="display:none;">
														<div class="container">
															<form>
																<div class="my-4 center">
																	<label for="userpw" class="w-100">ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
																	<div class="mt-1 d-flex justify-content-center">
																		<input id="userpw" type="password" class="px-3 py-2 min-rounded w-100" name="userpw" placeholder="8ìë¦¬ ì´ìƒ ê¸°í˜¸,ì˜ë¬¸,ìˆ«ì ì¡°í•© ì…ë ¥" autoComplete="off">
																	</div>
																</div>
																<div class="my-4 center">
																	<label for="userpwverify" class="w-100">ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
																	<div class="mt-1 d-flex justify-content-center">
																		<input id="userpwverify" type="password" class="px-3 py-2 min-rounded w-100" name="userpwverify" placeholder="8ìë¦¬ ì´ìƒ ê¸°í˜¸,ì˜ë¬¸,ìˆ«ì ì¡°í•© ì…ë ¥" autoComplete="off">
																	</div>
																</div>
															</form>
														</div>
													</div>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn btn-secondary"
														data-bs-dismiss="modal">ë‹«ê¸°</button>
													<button type="button" class="btn btn-primary" onclick="changeAccountInfo()">ë³€ê²½í•˜ê¸°</button>
												</div>
											</div>
										</div>
									</div>
									<!-- ëª¨ë‹¬ ë -->
								</div>
								
							</div>
						</div>
						<!-- ìœ„ì—ê¹Œì§€ íšŒì›ì •ë³´ ìˆ˜ì • ë -->
					</div>
				</div>
			</aside>
		</section>
		<!-- ë©”ì¸ë°”ë””ì˜ì—­ -->
		<!-- mypage1 -->
		<div class="container" id="tae-container-3">
			<div class="container" id="tae-container-1">
				<div class="card" id="myTabContent">
					<ul class="nav nav-tabs" id="myTab" role="tablist" style="--bs-nav-tabs-border-width:0px;">
						<li class="nav-item" role="presentation">
							<button class="nav-link" id="profile-tab" data-bs-toggle="tab"
							data-bs-target="#profile-tab-pane" type="button" role="tab"
							aria-controls="profile-tab-pane" aria-selected="true"
							style="width: 380px;">ğŸƒâ€â™€ï¸ë‚´ê°€ ì£¼ìµœí•œ í”„ë¡œì íŠ¸</button>
						</li>
						<li class="nav-item" role="presentation">
							<button class="nav-link active" id="tae-profile-tab-2"
							data-bs-toggle="tab" data-bs-target="#home-tab-pane"
							type="button" role="tab" aria-controls="home-tab-pane"
							aria-selected="false" style="width: 380px;" onclick="location.href='/myPage2'">ğŸ™‹â€â™€ï¸ë‚´ ì§ˆë‹µâ€í†µê³„</button>
						</li>

					</ul>
					
					
					<h5 style="padding-left:40px;padding-top:30px;font-weight:bold;">ìµœê·¼ ì£¼ìµœí•œ ì‚¬ì´ë“œí”„ë¡œì íŠ¸ TOP3ğŸ†
					<button type="button" class="btn btn-modal" id="tae-modal-btn" onclick="gotoMemberProfileSide()">ë”ë³´ê¸°
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
					stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg></button>
					</h5>
					<div class="d-flex" style="margin-top:-20px;">
						<div class="card" style="box-shadow: 9px 6px 10px 1px #d5d8df;border-radius:30px;width:285px;height:230px;margin-top:30px;margin-left:20px;"th:each="side:${sideList}">
							<div class="card-body" id="card-1">
								<ul class="tab-ul-2">
									<li style="margin-top: -10px;">
										<p style="font-size:15px;color:#979da9;">í”„ë¡œì íŠ¸ëª… | [[${side.title}]]</p>
										<br>
											<h6 style="padding-bottom: 80px;height:10px;text-align:center;font-weight:bold;overflow:hidden;text-overflow:ellipsis;
											">"[[${side.projectOutline}]]"</h6>
											<span style="margin-top:30px;color:#979da9;">ê°œë°œê¸°ê°„ : [[${side.devPeriod}]]</span>
											<span style="color:#979da9;">ëª¨ì§‘ì¸ì› : [[${side.recruitPersonnel}]]</span>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div style="margin-top:40px;">

						<div class="card d-flex" id="tae-card-2" style="border-radius: 30px;">
							<div class="card-body" id="tae-card-1">
								<h5 style="text-align: center; font-weight: bold;">ë‚´ ê´€ì‹¬ì£¼ì œ</h5>
								<ul class="tab-ul" id="topic">
								</ul>
							</div>
						</div>
						<div class="card d-flex" id="tae-card-2" style="border-radius: 30px;">
							<div class="card-body" id="tae-card-1">
								<h5 style="margin-bottom: -8px; font-weight: bold;">
									ğŸ˜‰ ì´ëª¨í‹°ì½˜ êµ¬ë§¤ë‚´ì—­
									<button type="button" class="btn btn-modal" id="tae-modal-btn"
										onclick="goEmoShop()" data-bs-toggle="modal"
										data-bs-target="#bookmark"
										>
										ë”ë³´ê¸°
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
											viewBox="0 0 24 24" fill="none" stroke="currentColor"
											stroke-width="2" stroke-linecap="round"
											stroke-linejoin="round" class="feather feather-chevron-right">
										<polyline points="9 18 15 12 9 6"></polyline></svg>
									</button>
								</h5>
									<hr>
								<ul class="tab-ul-3">
									<li th:each="emo:${emoInfo}">[[ ${emo.emoName} ]] 
										<span class="tae-ul-list" th:text="|êµ¬ë§¤ë‚ ì§œ ${#dates.format(emo.emoBuydate, 'yyyy-MM-dd')}|">
										[[${emo.emoBuydate}]] </span>
										<hr>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>


<script type="text/javascript" th:inline="javascript">
	
	//ë°ì´í„°ë¥¼ ì½¤ë§ˆë¡œ ë¶„ë¦¬í•˜ì—¬ ë°°ì—´ë¡œ ë³€í™˜
	var hashtag = [[${memberInfo.topicHashtag}]];
	if(hashtag != null) {
		var topics = hashtag.split(',');
		
		// ul ìš”ì†Œë¥¼ ê°€ì ¸ì˜¤ê¸°
		var ul = document.querySelector('#topic');
		
		// ê° ì£¼ì œì— ëŒ€í•´ li ìš”ì†Œë¥¼ ìƒì„±í•˜ì—¬ ulì— ì¶”ê°€
		topics.forEach(function(topic) {
		    var li = document.createElement('li');
		    li.textContent = topic.trim(); // ì£¼ì œ ì–‘ìª½ì˜ ê³µë°± ì œê±°
		    ul.appendChild(li);
		
		    // ì½¤ë§ˆ ì¶”ê°€
		    ul.insertAdjacentHTML('beforeend', '<span> </span>');
		});
		
		// ë§ˆì§€ë§‰ ì½¤ë§ˆ ì œê±°
		ul.lastElementChild.remove();	
	}
	
	let dbTagList = [[${tagList}]];
	//tagify
	var inputElm = document.querySelector('input[name=tags]');
	
	let insertTagList = [];
	// ë‚˜ì¤‘ì— ë°”ê¿”ì¹˜ê¸°í•´ì•¼í•¨.
	const data = dbTagList;
	const insertData = []
	for(let object in data) {
		insertData.push(data[object].tagName);
	}
	whitelist = insertData;//["A# .NET", "A# (Axiom)", "A-0 System", "A+", "A++", "ABAP", "ABC", "ABC ALGOL", "ABSET", "ABSYS", "ACC", "Accent", "Ace DASL", "ACL2", "Avicsoft", "ACT-III", "Action!", "ActionScript", "Ada", "Adenine", "Agda", "Agilent VEE", "Agora", "AIMMS", "Alef", "ALF", "ALGOL 58", "ALGOL 60", "ALGOL 68", "ALGOL W", "Alice", "Alma-0", "AmbientTalk", "Amiga E", "AMOS", "AMPL", "Apex (Salesforce.com)", "APL", "AppleScript", "Arc", "ARexx", "Argus", "AspectJ", "Assembly language", "ATS", "Ateji PX", "AutoHotkey", "Autocoder", "AutoIt", "AutoLISP / Visual LISP", "Averest", "AWK", "Axum", "Active Server Pages", "ASP.NET", "B", "Babbage", "Bash", "BASIC", "bc", "BCPL", "BeanShell", "Batch (Windows/Dos)", "Bertrand", "BETA", "Bigwig", "Bistro", "BitC", "BLISS", "Blockly", "BlooP", "Blue", "Boo", "Boomerang", "Bourne shell (including bash and ksh)", "BREW", "BPEL", "B", "C--", "C++ â€“ ISO/IEC 14882", "C# â€“ ISO/IEC 23270", "C/AL", "CachÃ© ObjectScript", "C Shell", "Caml", "Cayenne", "CDuce", "Cecil", "Cesil", "CÃ©u", "Ceylon", "CFEngine", "CFML", "Cg", "Ch", "Chapel", "Charity", "Charm", "Chef", "CHILL", "CHIP-8", "chomski", "ChucK", "CICS", "Cilk", "Citrine (programming language)", "CL (IBM)", "Claire", "Clarion", "Clean", "Clipper", "CLIPS", "CLIST", "Clojure", "CLU", "CMS-2", "COBOL â€“ ISO/IEC 1989", "CobolScript â€“ COBOL Scripting language", "Cobra", "CODE", "CoffeeScript", "ColdFusion", "COMAL", "Combined Programming Language (CPL)", "COMIT", "Common Intermediate Language (CIL)", "Common Lisp (also known as CL)", "COMPASS", "Component Pascal", "Constraint Handling Rules (CHR)", "COMTRAN", "Converge", "Cool", "Coq", "Coral 66", "Corn", "CorVision", "COWSEL", "CPL", "CPL", "Cryptol", "csh", "Csound", "CSP", "CUDA", "Curl", "Curry", "Cybil", "Cyclone", "Cython", "Java", "Javascript", "M2001", "M4", "M#", "Machine code", "MAD (Michigan Algorithm Decoder)", "MAD/I", "Magik", "Magma", "make", "Maple", "MAPPER now part of BIS", "MARK-IV now VISION:BUILDER", "Mary", "MASM Microsoft Assembly x86", "MATH-MATIC", "Mathematica", "MATLAB", "Maxima (see also Macsyma)", "Max (Max Msp â€“ Graphical Programming Environment)", "Maya (MEL)", "MDL", "Mercury", "Mesa", "Metafont", "Microcode", "MicroScript", "MIIS", "Milk (programming language)", "MIMIC", "Mirah", "Miranda", "MIVA Script", "ML", "Model 204", "Modelica", "Modula", "Modula-2", "Modula-3", "Mohol", "MOO", "Mortran", "Mouse", "MPD", "Mathcad", "MSIL â€“ deprecated name for CIL", "MSL", "MUMPS", "Mystic Programming L"];
	

	//initialize Tagify on the above input node reference
	var tagify = new Tagify(inputElm, {
		enforceWhitelist: true,
		maxTags: 5, // ìµœëŒ€ íƒœê·¸ ê°¯ìˆ˜ ì„¤ì •ê°€ëŠ¥.
		// make an array from the initial input value
		whitelist: whitelist 
	})

	//Chainable event listeners
	tagify.on('add', onAddTag)
  	.on('remove', onRemoveTag)
  	.on('input', onInput)
  	.on('edit', onTagEdit)
  	.on('invalid', onInvalidTag)
  	.on('click', onTagClick)
  	.on('focus', onTagifyFocusBlur)
  	.on('blur', onTagifyFocusBlur)
  	.on('dropdown:hide dropdown:show', e => e.type)
  	.on('dropdown:select', onDropdownSelect)
	
	var mockAjax = (function mockAjax(){
		var timeout;
		return function(duration){
    		clearTimeout(timeout); // abort last request
    		return new Promise(function(resolve, reject){
        	timeout = setTimeout(resolve, duration || 100, whitelist)
    	})}
	})()
	
	//tag added callback
	function onAddTag(e){
		// ì´ë¯¸ ì¶”ê°€ë˜ì—ˆë‹¤ë©´ ë¬´ì‹œ.
		if(insertTagList.indexOf(e.detail.data.value) >= 0) 
			return;
		
		if(insertTagList.length >= 5) {
			showWarningAlert('ìµœëŒ€ 5ê°œê¹Œì§€ë§Œ ë“±ë¡ê°€ëŠ¥í•©ë‹ˆë‹¤.');
			for(let i = 0; i < tagify.value.length; i++) {
	    		if (tagify.value[i].value == e.detail.data.value) {
	    			tagify.value.splice(i, 1);
	        		break;
	    		}
			}
		}
		insertTagList.push(e.detail.data.value); // ë°ì´í„° ì¶”ê°€í•˜ê¸°.
		//tagify.off('add', onAddTag) // exmaple of removing a custom Tagify event
	}

	//tag remvoed callback
	function onRemoveTag(e){
		//ìš”ì†Œ ì œê±°
		for(let i = 0; i < insertTagList.length; i++) {
    		if (insertTagList[i] == e.detail.data.value) {
    			insertTagList.splice(i, 1);
        		break;
    		}
		}
	}

	//on character(s) added/removed (user is typing/deleting)
	function onInput(e){
		tagify.settings.whitelist.length = 0; // reset current whitelist
		tagify.loading(true).dropdown.hide.call(tagify) // show the loader animation

		// get new whitelist from a delayed mocked request (Promise)
		mockAjax()
    	.then(function(result){
        	// replace tagify "whitelist" array values with new values
        	// and add back the ones already choses as Tags
        	tagify.settings.whitelist.push(...result, ...tagify.value)

        	// render the suggestions dropdown.
        	tagify.loading(false).dropdown.show.call(tagify, e.detail.value);
    	})
	}

	function onTagEdit(e){
	}

	//invalid tag added callback
	function onInvalidTag(e){
	}

	//invalid tag added callback
	function onTagClick(e){
	}

	function onTagifyFocusBlur(e){
	}

	function onDropdownSelect(e){
		// ì´ë¯¸ ì¶”ê°€ë˜ì—ˆë‹¤ë©´ ë¬´ì‹œ.
		if(insertTagList.indexOf(e.detail.data.value) >= 0) 
			return;
		
		if(insertTagList.length >= 5) {
			showWarningAlert('ìµœëŒ€ 5ê°œê¹Œì§€ë§Œ ë“±ë¡ê°€ëŠ¥í•©ë‹ˆë‹¤.');
			return;
		}
		insertTagList.push(e.detail.data.value); // ë°ì´í„° ì¶”ê°€í•˜ê¸°.
	}
	

	// tagify ê°ì²´ìƒì„±í›„ ì¶”ê°€.(ê°ì²´ìƒì„±í›„ ì¼ì •ì‹œê°„ ì§€ë‚˜ì•¼ ë™ì‘ë˜ëŠ”ë“¯..)
	// ê¸°ì¡´ì— ìˆë˜ê±° ì¶”ê°€í•˜ëŠ”ë²•(ìˆ˜ì •í¼ì´ë¼ë©´ ë°‘ì˜ ì½”ë“œ ìˆ˜í–‰ì„ ifë¬¸ìœ¼ë¡œ ì²´í¬í•´ì•¼í•¨.)
	setTimeout(function() {
		const myTagStr = [[${memberInfo.topicHashtag}]];
		if(typeof myTagStr != 'undefined' && myTagStr != null) {
			const myTagList = myTagStr.split(',');
			myTagList.forEach(obj => {
				tagify.addTags(obj);
			});
		}
	}, 500);
</script>

<!--/* ê°œì¸ì •ë³´ìˆ˜ì • */-->
<script th:inline="javascript">
	const memberInfo = [[${memberInfo}]];
	let originalFileName = null;
	const pwReg = /^(?=.*[a-zA-Z])(?=.*[!@#$%^])(?=.*[0-9]).{8,30}$/;
	const checkInfo = {
		emailDuplicateCheck : false,
		nicknameDuplicateCheck : false
	}
	
	function changeAccountInfo() {
		const result = $('#modAccDiv0').css('display');
		if(result != 'none') { // ê°œì¸ì •ë³´ ìˆ˜ì •
			const formData = new FormData();
			
			// ë³€ê²½ëœê²ƒë“¤ë§Œ ì²´í¬í•´ì„œ ìš”ì²­
			const inputEmail = $('input[name="email"]').val();
			if(inputEmail != memberInfo.email) {
				if(!checkInfo.emailDuplicateCheck) {
					showWarningAlert('ì´ë©”ì¼ ì¤‘ë³µì²´í¬ í•´ì£¼ì„¸ìš”.');
					return;
				}
				formData.append('email',inputEmail);
			}
			
			const inputName = $('input[name="name"]').val();
			if(inputName != memberInfo.name) {
				formData.append('name',inputName);
			}
				
			const inputNickName = $('input[name="nickname"]').val();
			if(inputNickName != memberInfo.nickname) {
				formData.append('nickname',inputNickName);
			}
			
			const fileName = $('#customFileInput').val();
			if(fileName != originalFileName) {
				const file = $("#profileImg")[0].files[0];
				formData.append('profileImage',file);
			}
			
			const hashTag = insertTagList.join(',');
			if(hashTag != memberInfo.topicHashtag) {
				formData.append('tag', hashTag);
			}
			
			// ê°’ì´ ìˆëŠ”ì§€ ì²´í¬
			let isSendable = false;
			for(let key of formData.keys()) {
				isSendable = true;
				break;
			}
			
			if(!isSendable) {
				showWarningAlert('ë³€ê²½ëœ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.');
				return;
			}
			else {
				formData.append(csrfPara, csrfToken);
				$.ajax('/changeAccountInfo', {
					type : "POST",
					dataÂ :Â formData,
					contentTypeÂ :Â false,
					processDataÂ :Â falseÂ Â 
			    })
			    .done(res => {
			    	if(res.result == "200") {
			    		window.location.href = window.location.href;
			    		return;
			    	}
			    })
			    .fail(err => {
			    	showWarningAlert('ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
			    })
			}
		}
		else { // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
			const userPw = $('input[name="userpw"]').val();
			const userPwVerify = $('input[name="userpwverify"]').val();
			if(userPw == '' || userPwVerify == '') {
				showWarningAlert('ë³€ê²½í•  ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');
				return;
			}
			
			if(userPw != userPwVerify) {
				showWarningAlert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
				return;	
			}
			
			if(!pwReg.test(userPw)) {
				showWarningAlert('ë¹„ë°€ë²ˆí˜¸ ì–‘ì‹ì— ë§ì¶”ì–´ ì‘ì„±í•´ì£¼ì„¸ìš”.');
				return;	
			}
			
			let object = {
				password : userPw,
				passwordVerify : userPwVerify
			}
			
			$.ajax('/changePasswordMypage', {
				type : "POST",
				dataÂ :Â object,
				beforeSend : function(xhr){
					xhr.setRequestHeader("X-CSRF-Token", csrfToken); 
				}
		    })
		    .done(res => {
		    	if(res.result == "200") {
		    		showSuccessAlert('ë³€ê²½ ì„±ê³µ!');
		    		$('input[name="userpw"]').val('');
		    		$('input[name="userpwverify"]').val('');
		    	}
		    	else {
		    		showFailAlert('ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
		    	}
		    })
		    .fail(err => {
		    	showWarningAlert('ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
		    })
		}
		
		
	}
	
	if(memberInfo.profileImage != null) {
		originalFileName = memberInfo.profileImage.split('_').slice(2).join('');
		$('#customFileInput').val(originalFileName);	
	}
	
	
	const allowImgExtension = ['jpg','jpeg','png'];
	$("#profileImg").on('change', (e) => {
		const fileName = $("#profileImg")[0].files[0].name;
		const extensionNameÂ = fileName.slice(fileName.lastIndexOf(".") + 1).toLowerCase();
	
		if(allowImgExtension.indexOf(extensionName) < 0) {
			showWarningAlert('ì´ë¯¸ì§€íŒŒì¼ë§Œ ì‚½ì…í•´ì£¼ì„¸ìš”');
			return;
		}
	
		$('#customFileInput').val($("#profileImg")[0].files[0].name);
	})
	
	$("input[name='nickname']").on('change', (e) => {
		checkInfo.nicknameDuplicateCheck = false;
	})
	
	$("input[name='email']").on('change', (e) => {
		checkInfo.emailDuplicateCheck = false;
	})

	function changeModifyAccountView(curView) {
		let notHighlitView = curView == '0' ? "1" : "0"; 
		$('#modAcc' + curView).css('background-color','#3e6ce3');
		$('#modAcc' + curView).css('color','white');
		$('#modAcc' + notHighlitView).css('background-color','');
		$('#modAcc' + notHighlitView).css('color','black');
		$('#modAccDiv' + curView).css('display', 'block');
		$('#modAccDiv' + notHighlitView).css('display', 'none');
	}
	
	// ë‹‰ë„¤ì„ ì¤‘ë³µì²´í¬
	function checkDuplicateNickname() {
		const reqNickname = $('input[name="nickname"]').val();
		if(reqNickname == '' || reqNickname.length > 20) {
			showWarningAlert('ë‹‰ë„¤ì„ ê¸¸ì´ì œí•œ í™•ì¸í•´ì£¼ì„¸ìš”.');
			return;
		}
		
		const url = "/checkNickname?nickName="+reqNickname;
		$.ajax(url,{
	        type : "GET",
	    })
	    .done(res => {
	    	if(res.result == "200") {
	    		showSuccessAlert('ì‚¬ìš©ê°€ëŠ¥í•œ ë‹‰ë„¤ì„ ì…ë‹ˆë‹¤.');
	    		//$("input[name='nickname']").prop("disabled", true);
	    		checkInfo.nicknameDuplicateCheck = true;
	    	}
	    	else {
	    		showFailAlert('ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ë‹‰ë„¤ì„ ì…ë‹ˆë‹¤.');
	    	}
	    })
	    .fail(err => {
	    	showWarningAlert('ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
	    })
	}
	

	function checkDuplicateEmail() {
		const reqEmail = $('input[name="email"]').val();
		const regEmail = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
		
		if(!regEmail.test(reqEmail)) {
			showWarningAlert("ì´ë©”ì¼ ì–‘ì‹ì— ë§ì¶° ì‘ì„±í•´ì£¼ì„¸ìš”.");
			return;
		}
		
		const url = "/checkEmail?email="+reqEmail;
		
		$.ajax(url,{
	        type : "GET",
	    })
	    .done(res => {
	    	if(!res.result) {
	    		showSuccessAlert('ì‚¬ìš©ê°€ëŠ¥í•œ ì´ë©”ì¼ ì…ë‹ˆë‹¤.');
	    		checkInfo.emailDuplicateCheck = true;
	    	}
	    	else {
	    		showFailAlert('ì‚¬ìš©ë¶ˆê°€ëŠ¥í•œ ì´ë©”ì¼ ì…ë‹ˆë‹¤.');
	    	}
	    })
	    .fail(err => {
	    	showWarningAlert('ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
	    })
	}
</script>

<script type="text/javascript" th:inline="javascript">
	
let csrfPara = $('meta[name="csrfPara"]').attr("content");
let csrfToken = $('meta[name="csrf"]').attr("content");
	const memberno = [[${session.member.memberNo}]]
	function goEmoShop(){
		location.href = '/emoBuyList';
	}
	
	
	//í™œë™ì ìˆ˜í™˜ì „
	$('#changepoint').on('click', pointUpdateAjax);
	
		function pointUpdateAjax(event){
			if (!validation()) return;
			let resPoint = $('input[name="resPoint"]');
			let obj = {
				resPoint : resPoint.val(),
			}
			//post ì—ì„œë§Œ ì‚¬ìš©
			obj[csrfPara] = csrfToken;
			
			$.ajax('/updateMemberPoint',{
				type:"POST",
				data : obj				
			}).done(result =>{
				showSuccessAlert('ì •ìƒì ìœ¼ë¡œ í™˜ì „ë˜ì—ˆìŠµë‹ˆë‹¤.');
				
				function dateFormat(date) {
					let dateFormat2 = date.getFullYear() +
						'-' + ( (date.getMonth()+1) < 9 ? "0" + (date.getMonth()+1) : (date.getMonth()+1) )+
						'-' + ( (date.getDate()) < 9 ? "0" + (date.getDate()) : (date.getDate()) );
					return dateFormat2;
				}

				const toDate = dateFormat(new Date());
				const commaIncDecPoint = Number(resPoint.val()).toLocaleString();
				
				const commaActivityPoint = Number(result.memberInfo.availableActivityPoint).toLocaleString();
				const commaAccummPoint = Number(result.memberInfo.availableAccumPoint).toLocaleString();
				const commaTotalPoint = Number(result.memberInfo.acoTotal).toLocaleString();
				const liString = `
									<li class="activity1">
										<span style="font-weight:bold;font-size:large;">í¬ì¸íŠ¸ ì „í™˜</span>
										<span class="increase-point">+ ${commaIncDecPoint}P</span>
										<br>
										<span class="tae_date">${toDate}</span>
										<hr>
									</li>`;
				
				$('#activityMypage').val('');
				
				
				const accumList = $('#accumList');
				accumList.prepend(liString);
				
				const liString2 = `
									<li class="activity2">
										<span style="font-weight:bold;font-size:large;">í¬ì¸íŠ¸ ì „í™˜ìœ¼ë¡œ ì¸í•˜ì—¬ í™œë™ì ìˆ˜ê°€ ì°¨ê°ë˜ì—ˆìŠµë‹ˆë‹¤.</span>
										<span class="decrease-point">- ${commaIncDecPoint}ì </span>
										<br>
										<span class="tae_date">${toDate}</span>
										<hr>
									</li>`;
					
				$('#activityMypage').val('');
				
				const accumList2 = $('#accumList2');
				accumList2.prepend(liString2);
				
				$('#pointMypage').text(commaTotalPoint);
				$('#totalPointMypage').text(commaTotalPoint);
				$('#accumPointMypage').attr("placeholder", "ì •ì‚° ê°€ëŠ¥í¬ì¸íŠ¸ " + commaAccummPoint + " P");
				$('#activityMypage').attr("placeholder", "ê°€ìš© í™œë™ì ìˆ˜ " + commaActivityPoint + " ì ");
				
			}).fail(err => console.log(err));
		}
			
		function validation(){
			let resPoint = $('input[name="resPoint"]');
			const numPoint = Number(resPoint.val());
			if(numPoint < 5000 || (numPoint % 1000) != 0){
				showWarningAlert("5,000ì  ì´ìƒë¶€í„° 1,000ì  ë‹¨ìœ„ë¡œ í™˜ì „ ê°€ëŠ¥í•©ë‹ˆë‹¤");
				return false;
			}
			return true;
		}	
		
	   $('#accountApprove').on('click', validation2);
		
	   // ê³„ì¢Œëª¨ë‹¬
	   const myAccountModal = new bootstrap.Modal('#accountList', {
		  keyboard: false
	   })
	   
	   function validation2(){
		   const memberGrade = [[${memberInfo.memberLevel}]]
		   let accPoint = $('input[name="accPoint"]').val();
		   accPoint = Number(accPoint);
		   if(memberGrade == 'K001' && (accPoint < 15000 || (accPoint % 1000) != 0)){
			   showWarningAlert("'ë£¨í‚¤'ë“±ê¸‰ì€ 15,000Pë¶€í„° 1,000ì  ë‹¨ìœ„ë¡œ ì •ì‚°ìš”ì²­ê°€ëŠ¥");
			   return false;
		   }else if(memberGrade == 'K002' && (accPoint < 12000 || (accPoint % 1000) != 0)){
			   showWarningAlert("'ë¸Œë¡ ì¦ˆ'ë“±ê¸‰ì€ 12,000Pë¶€í„° 1,000ì  ë‹¨ìœ„ë¡œ ì •ì‚°ìš”ì²­ê°€ëŠ¥");
			   return false;
		   }else if(memberGrade == 'K003' && (accPoint < 9000 || (accPoint % 1000) != 0)){
			   showWarningAlert("'ì‹¤ë²„'ë“±ê¸‰ì€ 9,000Pë¶€í„° 1,000ì  ë‹¨ìœ„ë¡œ ì •ì‚°ìš”ì²­ê°€ëŠ¥");
			   return false;
		   }else if(memberGrade == 'K004' && (accPoint < 7000 || (accPoint % 1000) != 0)){
			   showWarningAlert("'ê³¨ë“œ'ë“±ê¸‰ì€ 7,000Pë¶€í„° 1,000ì  ë‹¨ìœ„ë¡œ ì •ì‚°ìš”ì²­ê°€ëŠ¥");
			   return false;
		   }else if(memberGrade == 'K005' && (accPoint < 5000 || (accPoint % 1000) != 0)){
			   showWarningAlert("'ë‹¤ì´ì•„ëª¬ë“œ'ë“±ê¸‰ì€ 5,000Pë¶€í„° 1,000ì  ë‹¨ìœ„ë¡œ ì •ì‚°ìš”ì²­ê°€ëŠ¥");
			   return false;
		   }
		   
		   const modalToggle = document.getElementById('accountApprove');		   
		   myAccountModal.show(modalToggle);
		   return true;
	   }
	   
		let choiceAccountObj = null;
		function sendSettlementRequest(){
			if (choiceAccountObj == null){
				showWarningAlert('ì •ì‚°ë°›ì„ ê³„ì¢Œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
				return;
			}
			
			let accPoint = $('input[name="accPoint"]');
			let processStatus = 'O001';
			let obj = {
				memberNo : memberno,
				reqAccount : choiceAccountObj,
				processStatus : processStatus,
				settlementReqPoint : accPoint.val()
			}
			
			$.ajax('/updateSettlement', {
		        type: 'POST',
		        data: obj,
		        beforeSend : function(xhr){
					xhr.setRequestHeader("X-CSRF-Token", csrfToken); 
				}
			}).done(result =>{
				showSuccessAlert('í™˜ì „ ìš”ì²­ì´ ì „ë‹¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
				function dateFormat(date) {
					let dateFormat2 = date.getFullYear() +
						'-' + ( (date.getMonth()+1) < 9 ? "0" + (date.getMonth()+1) : (date.getMonth()+1) )+
						'-' + ( (date.getDate()) < 9 ? "0" + (date.getDate()) : (date.getDate()) );
					return dateFormat2;
				}

				const toDate = dateFormat(new Date());
				const originalIntValue = Number(accPoint.val());
				accPoint = originalIntValue.toLocaleString();
				
				const commaAccummPoint = Number(result.memberInfo2.availableAccumPoint - originalIntValue).toLocaleString();
				const commaTotalPoint = Number(result.memberInfo2.acoTotal - originalIntValue).toLocaleString();
				const liString = `
									<li class="activity1">
										<span style="font-weight:bold;font-size:large;">ì •ì‚° ìš”ì²­</span>
										<span class="decrease-point">- ${accPoint}P</span>
										<br>
										<span class="tae_date">${toDate}</span>
										<hr>
									</li>`;
				
				$('#activityMypage').val('');
				
				
				const accumList = $('#accumList');
				accumList.prepend(liString);
				
				$('#pointMypage').text(commaTotalPoint);
				$('#totalPointMypage').text(commaTotalPoint);
				$('#accumPointMypage').attr("placeholder", "ì •ì‚° ê°€ëŠ¥í¬ì¸íŠ¸ " + commaAccummPoint + " P");
				
				const modalToggle = document.getElementById('accountApprove');		   
				myAccountModal.hide(modalToggle);
				
			}).fail(err => console.log(err));
		        
		}
		
		
		function goRegAccount(){
			window.location.href="/accountConnect";
		}
		
		
	function choiceAccount(accountObj){
		if(choiceAccountObj != null  || choiceAccountObj == accountObj){
			$('#'+ choiceAccountObj).css("border", "");
		if(choiceAccountObj == accountObj) {
			choiceAccountObj = null;
			return;
		}
	}	
	choiceAccountObj = accountObj
			
	$('#'+ accountObj).css("border", "1px solid #aebfec");
			
	}
	
	function gotoMemberProfileSide() {
		
		window.location.href = "/member/" + memberno + "?pg=1&tp=2"
	}

</script>
