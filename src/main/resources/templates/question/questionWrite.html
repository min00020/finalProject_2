<div 
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:th="http://www.thymeleaf.org"
	layout:decorate="@{/layout/member/mainTemplate.html}"
	layout:fragment="content"	  
>
	<section>
		<div class="container" style="width:1000px;">
			<h3 style="font-weight:bold; color:#3e6ce3;margin-left:20px;">질문 작성하기</h3>
			<hr>
			<!-- 질문 작성폼 시작 -->
			<form name="questionWrite">
				<div style="width:900px; margin:0 auto; ">
					<div class="d-flex justify-content-between">	
						<div style="width:48%;">
							<label for="topic" style="font-weight : bold;">토픽</label>
							<p style="font-size:14px; margin-bottom:8px;">질문과 관련된 토픽을 선택해주세요. </p>
		                    <select id="topic" name="topic" class="form-select" style="border:1px solid #ccc;">
		                    	<option value="" selected disabled hidden>토픽을 선택해주세요</option>
		                    	<option value="H001">기술</option>
		                    	<option value="H002">사이드 프로젝트</option>
		                    </select>
						</div>
						<div style="width:48%;">
							<label for="point" style="font-weight:bold;">포인트</label>
							<span style="margin-left:5px; font-size:12px;">보유 </span>
							<span style="font-size:12px;color:#3e6ce3; font-weight:bold;">1000원</span>
							<p style="font-size:14px; margin-bottom:8px;">답변자에게 지급할 포인트 금액을 입력해주세요. </p>
		                   <!-- 	<input type="text" class="form-control" value="0"> -->
		                   	<div class="chae_input-container" style="width:100%;">
							    <input id="point" name="point" type="text" class="form-control" value="0" style="color:#3e6ce3;">
							    <button class="chae_pointBtn">전액사용</button>
							</div>
						</div>
					</div>
					<!-- 토픽, 포인트 끝 -->
					<br>
					<div>
						<div>
							<label for="title" style="font-weight:bold; margin-bottom:8px;">제목</label>
							<input id="title" name="title" type="text" class="form-control" placeholder="제목을 입력해주세요">
							<br>
						</div>
						<label for="tags" style="font-weight:bold; margin-bottom:8px;">태그</label>
						<input id="tag" name="tag" type="text" class="form-control" placeholder="태그를 입력해주세요">
						<br>
						
						<label for="contents" style="font-weight:bold; margin-bottom:8px;">질문 내용</label>
						<textarea id="contents" name="contents" class="form-control" style="height:300px;"></textarea>
						<br>
					</div>
					
					
					<div style="float: right;margin-bottom:10px;">
						<button type="button" class="btn text-white" style="background-color:#989daa; margin:10px;">취소</button>
						<button type="button" class="btn text-white" style="background-color:#3e6ce3;" onclick="sendQuestion()">등록</button>
					</div>
				</div>
				<!-- 질문 작성폼 끝 -->
			</form>
		</div>
		<!-- end of container -->
	</section>
</div>

<script th:inline="javascript">
let csrfPara = $('meta[name="csrfPara"]').attr("content");
let csrfToken = $('meta[name="csrf"]').attr("content");

function sendQuestion(){
	console.log('test',[[${session.member.memberNo}]]);
	const formData = new FormData(document.questionWrite);
	
	formData.append(csrfPara, csrfToken);
	formData.append("memberNo", [[${session.member.memberNo}]]);
	
	$.ajax('/write', {
		type : "POST",
		data : formData,
		contentType : false,
		processData : false 	
	})
	.done(res => {
		console.log('등록 성공');
		console.log(res);
    	/* window.location.href = "/gitLinkPage?id=" + $('input[name="userid"]').val(); */
    })
    .fail(err => {
    	console.log(err);
    	showWarningAlert('다시 시도해주세요.');
    })
	
}
	
</script>