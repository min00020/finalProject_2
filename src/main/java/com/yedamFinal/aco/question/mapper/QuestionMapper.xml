<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.yedamFinal.aco.question.mapper.QuestionMapper">
	<!-- 질문글 전체조회 -->
	<select id="getQuestionList" resultType="QuestionVO">
		SELECT m.id, m.profile_image,
		        q.QUESTION_BOARD_NO,
		        q.MEMBER_NO,
		        q.TOPIC,
		        q.POINT,
		        q.TITLE,
		        q.TAG,
		        q.CONTENTS,
		        q.WRITE_DATE,
		        q.VIEW_CNT,
		        q.RECOMMEND_CNT,
		        q.BOOKMARK_CNT,
		        q.ANSWER_CNT
		FROM QUESTION_BOARD q
		JOIN MEMBER m
		ON q.MEMBER_NO = m.MEMBER_NO
		ORDER BY WRITE_DATE DESC
	</select>
	
	<!-- 질문글 단건조회 -->
	<select id="getQuestionInfo" resultType="QuestionVO">
		SELECT m.id, m.profile_image,
		    q.QUESTION_BOARD_NO,q.MEMBER_NO,q.TOPIC,q.POINT,q.TITLE,q.TAG,q.CONTENTS,
		    q.WRITE_DATE,q.VIEW_CNT,q.RECOMMEND_CNT,q.BOOKMARK_CNT,q.ANSWER_CNT
		FROM QUESTION_BOARD q
		JOIN MEMBER m
		ON q.MEMBER_NO = m.MEMBER_NO
		WHERE QUESTION_BOARD_NO = #{questionBoardNo}
	</select>
	
	<!-- 질문글 작성 -->
	<insert id="insertQuestion" parameterType="QuestionVO">
		INSERT INTO QUESTION_BOARD (
		    QUESTION_BOARD_NO,MEMBER_NO,TOPIC, POINT, TITLE, TAG, 
		    CONTENTS, WRITE_DATE, VIEW_CNT, RECOMMEND_CNT, BOOKMARK_CNT, ANSWER_CNT
	    )
	    VALUES(
		    question_board_seq.NEXTVAL, #{memberNo}, #{topic}, #{point}, 
		    #{title}, #{tag},#{contents},SYSDATE,0,0,0,0
	    )
	</insert>
	<!-- 질문글 수정 -->
	<update id="updateQuestion" parameterType="QuestionVO">
		UPDATE QUESTION_BOARD
	    SET TOPIC = #{topic},
	        POINT = #{point},
	        TITLE = #title},
	        TAG = #{tag},
	        CONTENTS = #{contents}
	    WHERE QUESTION_BOARD_NO = #{questionBoardNo}
	</update>
	<!-- 질문글 삭제 -->
	<delete id="deleteQuestion">
		DELETE QUESTION_BOARD
		WHERE QUESTION_BOARD_NO = #{questionBoardNo}
	</delete>
</mapper>